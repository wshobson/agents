{
  "id": "tdd_workflows_tdd_red",
  "name": "tdd-red",
  "source": "tdd-workflows",
  "originalPath": "plugins/tdd-workflows/commands/tdd-red.md",
  "command": "/tdd-workflows:tdd-red",
  "parameters": {},
  "outputs": {},
  "agentsUsing": [],
  "fullDefinition": "Write comprehensive failing tests following TDD red phase principles.\n\n[Extended thinking: Generates failing tests that properly define expected behavior using test-automator agent.]\n\n## Role\n\nGenerate failing tests using Task tool with subagent_type=\"unit-testing::test-automator\".\n\n## Prompt Template\n\n\"Generate comprehensive FAILING tests for: $ARGUMENTS\n\n## Core Requirements\n\n1. **Test Structure**\n   - Framework-appropriate setup (Jest/pytest/JUnit/Go/RSpec)\n   - Arrange-Act-Assert pattern\n   - should_X_when_Y naming convention\n   - Isolated fixtures with no interdependencies\n\n2. **Behavior Coverage**\n   - Happy path scenarios\n   - Edge cases (empty, null, boundary values)\n   - Error handling and exceptions\n   - Concurrent access (if applicable)\n\n3. **Failure Verification**\n   - Tests MUST fail when run\n   - Failures for RIGHT reasons (not syntax/import errors)\n   - Meaningful diagnostic error messages\n   - No cascading failures\n\n4. **Test Categories**\n   - Unit: Isolated component behavior\n   - Integration: Component interaction\n   - Contract: API/interface contracts\n   - Property: Mathematical invariants\n\n## Framework Patterns\n\n**JavaScript/TypeScript (Jest/Vitest)**\n- Mock dependencies with `vi.fn()` or `jest.fn()`\n- Use `@testing-library` for React components\n- Property tests with `fast-check`\n\n**Python (pytest)**\n- Fixtures with appropriate scopes\n- Parametrize for multiple test cases\n- Hypothesis for property-based tests\n\n**Go**\n- Table-driven tests with subtests\n- `t.Parallel()` for parallel execution\n- Use `testify/assert` for cleaner assertions\n\n**Ruby (RSpec)**\n- `let` for lazy loading, `let!` for eager\n- Contexts for different scenarios\n- Shared examples for common behavior\n\n## Quality Checklist\n\n- Readable test names documenting intent\n- One behavior per test\n- No implementation leakage\n- Meaningful test data (not 'foo'/'bar')\n- Tests serve as living documentation\n\n## Anti-Patterns to Avoid\n\n- Tests passing immediately\n- Testing implementation vs behavior\n- Complex setup code\n- Multiple responsibilities per test\n- Brittle tests tied to specifics\n\n## Edge Case Categories\n\n- **Null/Empty**: undefined, null, empty string/array/object\n- **Boundaries**: min/max values, single element, capacity limits\n- **Special Cases**: Unicode, whitespace, special characters\n- **State**: Invalid transitions, concurrent modifications\n- **Errors**: Network failures, timeouts, permissions\n\n## Output Requirements\n\n- Complete test files with imports\n- Documentation of test purpose\n- Commands to run and verify failures\n- Metrics: test count, coverage areas\n- Next steps for green phase\"\n\n## Validation\n\nAfter generation:\n1. Run tests - confirm they fail\n2. Verify helpful failure messages\n3. Check test independence\n4. Ensure comprehensive coverage\n\n## Example (Minimal)\n\n```typescript\n// auth.service.test.ts\ndescribe('AuthService', () => {\n  let authService: AuthService;\n  let mockUserRepo: jest.Mocked<UserRepository>;\n\n  beforeEach(() => {\n    mockUserRepo = { findByEmail: jest.fn() } as any;\n    authService = new AuthService(mockUserRepo);\n  });\n\n  it('should_return_token_when_valid_credentials', async () => {\n    const user = { id: '1', email: 'test@example.com', passwordHash: 'hashed' };\n    mockUserRepo.findByEmail.mockResolvedValue(user);\n\n    const result = await authService.authenticate('test@example.com', 'pass');\n\n    expect(result.success).toBe(true);\n    expect(result.token).toBeDefined();\n  });\n\n  it('should_fail_when_user_not_found', async () => {\n    mockUserRepo.findByEmail.mockResolvedValue(null);\n\n    const result = await authService.authenticate('none@example.com', 'pass');\n\n    expect(result.success).toBe(false);\n    expect(result.error).toBe('INVALID_CREDENTIALS');\n  });\n});\n```\n\nTest requirements: $ARGUMENTS\n"
}