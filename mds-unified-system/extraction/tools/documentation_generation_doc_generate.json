{
  "id": "documentation_generation_doc_generate",
  "name": "Automated Documentation Generation",
  "source": "documentation-generation",
  "originalPath": "plugins/documentation-generation/commands/doc-generate.md",
  "command": "/documentation-generation:doc-generate",
  "parameters": {},
  "outputs": {},
  "agentsUsing": [],
  "fullDefinition": "# Automated Documentation Generation\n\nYou are a documentation expert specializing in creating comprehensive, maintainable documentation from code. Generate API docs, architecture diagrams, user guides, and technical references using AI-powered analysis and industry best practices.\n\n## Context\nThe user needs automated documentation generation that extracts information from code, creates clear explanations, and maintains consistency across documentation types. Focus on creating living documentation that stays synchronized with code.\n\n## Requirements\n$ARGUMENTS\n\n## How to Use This Tool\n\nThis tool provides both **concise instructions** (what to create) and **detailed reference examples** (how to create it). Structure:\n- **Instructions**: High-level guidance and documentation types to generate\n- **Reference Examples**: Complete implementation patterns to adapt and use as templates\n\n## Instructions\n\nGenerate comprehensive documentation by analyzing the codebase and creating the following artifacts:\n\n### 1. **API Documentation**\n- Extract endpoint definitions, parameters, and responses from code\n- Generate OpenAPI/Swagger specifications\n- Create interactive API documentation (Swagger UI, Redoc)\n- Include authentication, rate limiting, and error handling details\n\n### 2. **Architecture Documentation**\n- Create system architecture diagrams (Mermaid, PlantUML)\n- Document component relationships and data flows\n- Explain service dependencies and communication patterns\n- Include scalability and reliability considerations\n\n### 3. **Code Documentation**\n- Generate inline documentation and docstrings\n- Create README files with setup, usage, and contribution guidelines\n- Document configuration options and environment variables\n- Provide troubleshooting guides and code examples\n\n### 4. **User Documentation**\n- Write step-by-step user guides\n- Create getting started tutorials\n- Document common workflows and use cases\n- Include accessibility and localization notes\n\n### 5. **Documentation Automation**\n- Configure CI/CD pipelines for automatic doc generation\n- Set up documentation linting and validation\n- Implement documentation coverage checks\n- Automate deployment to hosting platforms\n\n### Quality Standards\n\nEnsure all generated documentation:\n- Is accurate and synchronized with current code\n- Uses consistent terminology and formatting\n- Includes practical examples and use cases\n- Is searchable and well-organized\n- Follows accessibility best practices\n\n## Reference Examples\n\n### Example 1: Code Analysis for Documentation\n\n**API Documentation Extraction**\n```python\nimport ast\nfrom typing import Dict, List\n\nclass APIDocExtractor:\n    def extract_endpoints(self, code_path):\n        \"\"\"Extract API endpoints and their documentation\"\"\"\n        endpoints = []\n\n        with open(code_path, 'r') as f:\n            tree = ast.parse(f.read())\n\n        for node in ast.walk(tree):\n            if isinstance(node, ast.FunctionDef):\n                for decorator in node.decorator_list:\n                    if self._is_route_decorator(decorator):\n                        endpoint = {\n                            'method': self._extract_method(decorator),\n                            'path': self._extract_path(decorator),\n                            'function': node.name,\n                            'docstring': ast.get_docstring(node),\n                            'parameters': self._extract_parameters(node),\n                            'returns': self._extract_returns(node)\n                        }\n                        endpoints.append(endpoint)\n        return endpoints\n\n    def _extract_parameters(self, func_node):\n        \"\"\"Extract function parameters with types\"\"\"\n        params = []\n        for arg in func_node.args.args:\n            param = {\n                'name': arg.arg,\n                'type': ast.unparse(arg.annotation) if arg.annotation else None,\n                'required': True\n            }\n            params.append(param)\n        return params\n```\n\n**Schema Extraction**\n```python\ndef extract_pydantic_schemas(file_path):\n    \"\"\"Extract Pydantic model definitions for API documentation\"\"\"\n    schemas = []\n\n    with open(file_path, 'r') as f:\n        tree = ast.parse(f.read())\n\n    for node in ast.walk(tree):\n        if isinstance(node, ast.ClassDef):\n            if any(base.id == 'BaseModel' for base in node.bases if hasattr(base, 'id')):\n                schema = {\n                    'name': node.name,\n                    'description': ast.get_docstring(node),\n                    'fields': []\n                }\n\n                for item in node.body:\n                    if isinstance(item, ast.AnnAssign):\n                        field = {\n                            'name': item.target.id,\n                            'type': ast.unparse(item.annotation),\n                            'required': item.value is None\n                        }\n                        schema['fields'].append(field)\n                schemas.append(schema)\n    return schemas\n```\n\n### Example 2: OpenAPI Specification Generation\n\n**OpenAPI Template**\n```yaml\nopenapi: 3.0.0\ninfo:\n  title: ${API_TITLE}\n  version: ${VERSION}\n  description: |\n    ${DESCRIPTION}\n\n    ## Authentication\n    ${AUTH_DESCRIPTION}\n\nservers:\n  - url: https://api.example.com/v1\n    description: Production server\n\nsecurity:\n  - bearerAuth: []\n\npaths:\n  /users:\n    get:\n      summary: List all users\n      operationId: listUsers\n      tags:\n        - Users\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n        - name: limit\n          in: query\n          schema:\n            type: integer\n            default: 20\n            maximum: 100\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  data:\n                    type: array\n                    items:\n                      $ref: '#/components/schemas/User'\n                  pagination:\n                    $ref: '#/components/schemas/Pagination'\n        '401':\n          $ref: '#/components/responses/Unauthorized'\n\ncomponents:\n  schemas:\n    User:\n      type: object\n      required:\n        - id\n        - email\n      properties:\n        id:\n          type: string\n          format: uuid\n        email:\n          type: string\n          format: email\n        name:\n          type: string\n        createdAt:\n          type: string\n          format: date-time\n```\n\n### Example 3: Architecture Diagrams\n\n**System Architecture (Mermaid)**\n```mermaid\ngraph TB\n    subgraph \"Frontend\"\n        UI[React UI]\n        Mobile[Mobile App]\n    end\n\n    subgraph \"API Gateway\"\n        Gateway[Kong/nginx]\n        Auth[Auth Service]\n    end\n\n    subgraph \"Microservices\"\n        UserService[User Service]\n        OrderService[Order Service]\n        PaymentService[Payment Service]\n    end\n\n    subgraph \"Data Layer\"\n        PostgresMain[(PostgreSQL)]\n        Redis[(Redis Cache)]\n        S3[S3 Storage]\n    end\n\n    UI --> Gateway\n    Mobile --> Gateway\n    Gateway --> Auth\n    Gateway --> UserService\n    Gateway --> OrderService\n    OrderService --> PaymentService\n    UserService --> PostgresMain\n    UserService --> Redis\n    OrderService --> PostgresMain\n```\n\n**Component Documentation**\n```markdown\n## User Service\n\n**Purpose**: Manages user accounts, authentication, and profiles\n\n**Technology Stack**:\n- Language: Python 3.11\n- Framework: FastAPI\n- Database: PostgreSQL\n- Cache: Redis\n- Authentication: JWT\n\n**API Endpoints**:\n- `POST /users` - Create new user\n- `GET /users/{id}` - Get user details\n- `PUT /users/{id}` - Update user\n- `POST /auth/login` - User login\n\n**Configuration**:\n```yaml\nuser_service:\n  port: 8001\n  database:\n    host: postgres.internal\n    name: users_db\n  jwt:\n    secret: ${JWT_SECRET}\n    expiry: 3600\n```\n```\n\n### Example 4: README Generation\n\n**README Template**\n```markdown\n# ${PROJECT_NAME}\n\n${BADGES}\n\n${SHORT_DESCRIPTION}\n\n## Features\n\n${FEATURES_LIST}\n\n## Installation\n\n### Prerequisites\n\n- Python 3.8+\n- PostgreSQL 12+\n- Redis 6+\n\n### Using pip\n\n```bash\npip install ${PACKAGE_NAME}\n```\n\n### From source\n\n```bash\ngit clone https://github.com/${GITHUB_ORG}/${REPO_NAME}.git\ncd ${REPO_NAME}\npip install -e .\n```\n\n## Quick Start\n\n```python\n${QUICK_START_CODE}\n```\n\n## Configuration\n\n### Environment Variables\n\n| Variable | Description | Default | Required |\n|----------|-------------|---------|----------|\n| DATABASE_URL | PostgreSQL connection string | - | Yes |\n| REDIS_URL | Redis connection string | - | Yes |\n| SECRET_KEY | Application secret key | - | Yes |\n\n## Development\n\n```bash\n# Clone and setup\ngit clone https://github.com/${GITHUB_ORG}/${REPO_NAME}.git\ncd ${REPO_NAME}\npython -m venv venv\nsource venv/bin/activate\n\n# Install dependencies\npip install -r requirements-dev.txt\n\n# Run tests\npytest\n\n# Start development server\npython manage.py runserver\n```\n\n## Testing\n\n```bash\n# Run all tests\npytest\n\n# Run with coverage\npytest --cov=your_package\n```\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit your changes (`git commit -m 'Add amazing feature'`)\n4. Push to the branch (`git push origin feature/amazing-feature`)\n5. Open a Pull Request\n\n## License\n\nThis project is licensed under the ${LICENSE} License - see the [LICENSE](LICENSE) file for details.\n```\n\n### Example 5: Function Documentation Generator\n\n```python\nimport inspect\n\ndef generate_function_docs(func):\n    \"\"\"Generate comprehensive documentation for a function\"\"\"\n    sig = inspect.signature(func)\n    params = []\n    args_doc = []\n\n    for param_name, param in sig.parameters.items():\n        param_str = param_name\n        if param.annotation != param.empty:\n            param_str += f\": {param.annotation.__name__}\"\n        if param.default != param.empty:\n            param_str += f\" = {param.default}\"\n        params.append(param_str)\n        args_doc.append(f\"{param_name}: Description of {param_name}\")\n\n    return_type = \"\"\n    if sig.return_annotation != sig.empty:\n        return_type = f\" -> {sig.return_annotation.__name__}\"\n\n    doc_template = f'''\ndef {func.__name__}({\", \".join(params)}){return_type}:\n    \"\"\"\n    Brief description of {func.__name__}\n\n    Args:\n        {chr(10).join(f\"        {arg}\" for arg in args_doc)}\n\n    Returns:\n        Description of return value\n\n    Examples:\n        >>> {func.__name__}(example_input)\n        expected_output\n    \"\"\"\n'''\n    return doc_template\n```\n\n### Example 6: User Guide Template\n\n```markdown\n# User Guide\n\n## Getting Started\n\n### Creating Your First ${FEATURE}\n\n1. **Navigate to the Dashboard**\n\n   Click on the ${FEATURE} tab in the main navigation menu.\n\n2. **Click \"Create New\"**\n\n   You'll find the \"Create New\" button in the top right corner.\n\n3. **Fill in the Details**\n\n   - **Name**: Enter a descriptive name\n   - **Description**: Add optional details\n   - **Settings**: Configure as needed\n\n4. **Save Your Changes**\n\n   Click \"Save\" to create your ${FEATURE}.\n\n### Common Tasks\n\n#### Editing ${FEATURE}\n\n1. Find your ${FEATURE} in the list\n2. Click the \"Edit\" button\n3. Make your changes\n4. Click \"Save\"\n\n#### Deleting ${FEATURE}\n\n> \u26a0\ufe0f **Warning**: Deletion is permanent and cannot be undone.\n\n1. Find your ${FEATURE} in the list\n2. Click the \"Delete\" button\n3. Confirm the deletion\n\n### Troubleshooting\n\n| Error | Meaning | Solution |\n|-------|---------|----------|\n| \"Name required\" | The name field is empty | Enter a name |\n| \"Permission denied\" | You don't have access | Contact admin |\n| \"Server error\" | Technical issue | Try again later |\n```\n\n### Example 7: Interactive API Playground\n\n**Swagger UI Setup**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>API Documentation</title>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/swagger-ui-dist@latest/swagger-ui.css\">\n</head>\n<body>\n    <div id=\"swagger-ui\"></div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/swagger-ui-dist@latest/swagger-ui-bundle.js\"></script>\n    <script>\n        window.onload = function() {\n            SwaggerUIBundle({\n                url: \"/api/openapi.json\",\n                dom_id: '#swagger-ui',\n                deepLinking: true,\n                presets: [SwaggerUIBundle.presets.apis],\n                layout: \"StandaloneLayout\"\n            });\n        }\n    </script>\n</body>\n</html>\n```\n\n**Code Examples Generator**\n```python\ndef generate_code_examples(endpoint):\n    \"\"\"Generate code examples for API endpoints in multiple languages\"\"\"\n    examples = {}\n\n    # Python\n    examples['python'] = f'''\nimport requests\n\nurl = \"https://api.example.com{endpoint['path']}\"\nheaders = {{\"Authorization\": \"Bearer YOUR_API_KEY\"}}\n\nresponse = requests.{endpoint['method'].lower()}(url, headers=headers)\nprint(response.json())\n'''\n\n    # JavaScript\n    examples['javascript'] = f'''\nconst response = await fetch('https://api.example.com{endpoint['path']}', {{\n    method: '{endpoint['method']}',\n    headers: {{'Authorization': 'Bearer YOUR_API_KEY'}}\n}});\n\nconst data = await response.json();\nconsole.log(data);\n'''\n\n    # cURL\n    examples['curl'] = f'''\ncurl -X {endpoint['method']} https://api.example.com{endpoint['path']} \\\\\n    -H \"Authorization: Bearer YOUR_API_KEY\"\n'''\n\n    return examples\n```\n\n### Example 8: Documentation CI/CD\n\n**GitHub Actions Workflow**\n```yaml\nname: Generate Documentation\n\non:\n  push:\n    branches: [main]\n    paths:\n      - 'src/**'\n      - 'api/**'\n\njobs:\n  generate-docs:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v3\n\n    - name: Set up Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: '3.11'\n\n    - name: Install dependencies\n      run: |\n        pip install -r requirements-docs.txt\n        npm install -g @redocly/cli\n\n    - name: Generate API documentation\n      run: |\n        python scripts/generate_openapi.py > docs/api/openapi.json\n        redocly build-docs docs/api/openapi.json -o docs/api/index.html\n\n    - name: Generate code documentation\n      run: sphinx-build -b html docs/source docs/build\n\n    - name: Deploy to GitHub Pages\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./docs/build\n```\n\n### Example 9: Documentation Coverage Validation\n\n```python\nimport ast\nimport glob\n\nclass DocCoverage:\n    def check_coverage(self, codebase_path):\n        \"\"\"Check documentation coverage for codebase\"\"\"\n        results = {\n            'total_functions': 0,\n            'documented_functions': 0,\n            'total_classes': 0,\n            'documented_classes': 0,\n            'missing_docs': []\n        }\n\n        for file_path in glob.glob(f\"{codebase_path}/**/*.py\", recursive=True):\n            module = ast.parse(open(file_path).read())\n\n            for node in ast.walk(module):\n                if isinstance(node, ast.FunctionDef):\n                    results['total_functions'] += 1\n                    if ast.get_docstring(node):\n                        results['documented_functions'] += 1\n                    else:\n                        results['missing_docs'].append({\n                            'type': 'function',\n                            'name': node.name,\n                            'file': file_path,\n                            'line': node.lineno\n                        })\n\n                elif isinstance(node, ast.ClassDef):\n                    results['total_classes'] += 1\n                    if ast.get_docstring(node):\n                        results['documented_classes'] += 1\n                    else:\n                        results['missing_docs'].append({\n                            'type': 'class',\n                            'name': node.name,\n                            'file': file_path,\n                            'line': node.lineno\n                        })\n\n        # Calculate coverage percentages\n        results['function_coverage'] = (\n            results['documented_functions'] / results['total_functions'] * 100\n            if results['total_functions'] > 0 else 100\n        )\n        results['class_coverage'] = (\n            results['documented_classes'] / results['total_classes'] * 100\n            if results['total_classes'] > 0 else 100\n        )\n\n        return results\n```\n\n## Output Format\n\n1. **API Documentation**: OpenAPI spec with interactive playground\n2. **Architecture Diagrams**: System, sequence, and component diagrams\n3. **Code Documentation**: Inline docs, docstrings, and type hints\n4. **User Guides**: Step-by-step tutorials\n5. **Developer Guides**: Setup, contribution, and API usage guides\n6. **Reference Documentation**: Complete API reference with examples\n7. **Documentation Site**: Deployed static site with search functionality\n\nFocus on creating documentation that is accurate, comprehensive, and easy to maintain alongside code changes.\n"
}